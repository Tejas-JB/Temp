<script type="module" src="./index.js"></script>
    <script>
        let recognition; // Moved outside to be accessible by both start and stop functionality
        if ('SpeechRecognition' in window || 'webkitSpeechRecognition' in window) {
            recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
            recognition.lang = 'en-US';
            recognition.continuous = true;
            recognition.onresult = function(event) {
                const transcript = event.results[event.results.length - 1][0].transcript;
                document.getElementById('user-input-field').value = transcript;
                // Optional: Simulate talk button click
                // document.getElementById('talk-button').click();
            };

            document.getElementById('microphone-button').addEventListener('click', function() {
                document.getElementById('user-input-field').value = ''; // Clear the textbox
                recognition.start(); // Start speech recognition
            });
        } else {
            alert('Speech recognition not supported by this browser.');
        }

        // Event listener for the Start button to stop the recognition
        document.getElementById('talk-button').addEventListener('click', function() {
            if (recognition) {
                recognition.stop();
            }
        });
    </script>
